import { NS, Server } from "../types/NetscriptDefinitions/index"


export async function main(ns: NS) {
    const oldFn = eval("window.setTimeout.bind(window)")

    const newFn = function (handler: TimerHandler, timeout?: number, ...args: any[]): number {
        if (eval("window.skipTimeoutHack")) {
            eval("window.skipTimeoutHack = false")
            return oldFn(handler, timeout, ...args)
        }
        return oldFn(handler, 100, ...args) 
    }

    eval("window.setTimeout = newFn")
}
